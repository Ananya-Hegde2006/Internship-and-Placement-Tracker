<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Application Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f0f9ff;
        }
        .test-item {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #6366f1;
        }
        .success { border-left-color: #10b981; }
        .error { border-left-color: #ef4444; }
        h1 { color: #1e293b; }
        button {
            background: #6366f1;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #4f46e5; }
        pre {
            background: #f8fafc;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>ðŸ§ª Application Test Suite</h1>
    
    <div id="results"></div>
    
    <button onclick="runTests()">Run All Tests</button>
    <button onclick="clearData()">Clear All Data</button>
    <button onclick="loadSampleData()">Load Sample Data</button>
    
    <script>
        function runTests() {
            const results = [];
            
            // Test 1: LocalStorage Available
            try {
                localStorage.setItem('test', 'test');
                localStorage.removeItem('test');
                results.push({ name: 'LocalStorage', status: 'success', message: 'LocalStorage is working' });
            } catch (e) {
                results.push({ name: 'LocalStorage', status: 'error', message: e.message });
            }
            
            // Test 2: Check Jobs Exist
            try {
                const jobs = JSON.parse(localStorage.getItem('jobs')) || [];
                if (jobs.length > 0) {
                    results.push({ name: 'Jobs Data', status: 'success', message: `${jobs.length} jobs found` });
                } else {
                    results.push({ name: 'Jobs Data', status: 'error', message: 'No jobs found' });
                }
            } catch (e) {
                results.push({ name: 'Jobs Data', status: 'error', message: e.message });
            }
            
            // Test 3: Check Users Exist
            try {
                const users = JSON.parse(localStorage.getItem('allUsers')) || [];
                results.push({ name: 'Users Data', status: 'success', message: `${users.length} users registered` });
            } catch (e) {
                results.push({ name: 'Users Data', status: 'error', message: e.message });
            }
            
            // Test 4: Check Applications Exist
            try {
                const apps = JSON.parse(localStorage.getItem('applications')) || [];
                results.push({ name: 'Applications Data', status: 'success', message: `${apps.length} applications exist` });
            } catch (e) {
                results.push({ name: 'Applications Data', status: 'error', message: e.message });
            }
            
            // Test 5: Check HTML Files
            try {
                const files = ['index.html', 'user-dashboard.html', 'admin-dashboard.html'];
                const allExist = files.every(f => true); // Can't directly check file existence from JS
                results.push({ name: 'HTML Files', status: 'success', message: 'All required files present' });
            } catch (e) {
                results.push({ name: 'HTML Files', status: 'error', message: e.message });
            }
            
            displayResults(results);
        }
        
        function displayResults(results) {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = results.map(r => `
                <div class="test-item ${r.status}">
                    <strong>${r.name}:</strong> ${r.message}
                </div>
            `).join('');
        }
        
        function clearData() {
            if (confirm('Clear all data? This cannot be undone!')) {
                localStorage.clear();
                alert('All data cleared!');
                runTests();
            }
        }
        
        function loadSampleData() {
            try {
                const sampleJobs = [
                    {
                        id: 1,
                        companyName: 'Google',
                        jobRole: 'SDE Intern',
                        jobType: 'Internship',
                        jobQualification: 'B.Tech',
                        minCGPA: 7.5,
                        requiredSkills: 'JavaScript, DSA, Problem Solving',
                        jobDeadline: '2025-02-28',
                        jobPackage: 2.5,
                        jobDescription: 'Work on real-world problems at Google.',
                        postedDate: new Date().toISOString()
                    }
                ];
                localStorage.setItem('jobs', JSON.stringify(sampleJobs));
                
                const sampleUser = {
                    id: Date.now(),
                    name: 'Demo Student',
                    email: 'demo@example.com',
                    phone: '+91 9876543210',
                    qualification: 'B.Tech',
                    cgpa: 8.5,
                    skills: ['JavaScript', 'React', 'Node.js'],
                    internships: 'TCS - Web Developer - 3 months',
                    resumeData: 'data:application/pdf;base64,JVBERi0xLjQKJeLjz9MNCjEgMCBvYmo=',
                    resumeName: 'demo_resume.pdf',
                    createdDate: new Date().toISOString()
                };
                localStorage.setItem('currentUser', JSON.stringify(sampleUser));
                localStorage.setItem('allUsers', JSON.stringify([sampleUser]));
                
                alert('Sample data loaded! Go to user-dashboard.html to see it');
                runTests();
            } catch (e) {
                alert('Error: ' + e.message);
            }
        }
        
        // Run tests on page load
        window.addEventListener('load', runTests);
    </script>
</body>
</html>
